/*
  style.css — 等价优化：统一 Token / 兼容性修正 / 响应式更稳
*/

/* ========== Tokens ========== */
:root{
  --bg:#f6f7f9; --card:#fff; --card-alt:#fafbfc; --border:#e5e7eb;
  --text:#0f172a; --muted:#6b7280; --accent:#2563eb; --accent-contrast:#fff;
  --accent-soft: rgba(37,99,235,.12); --table-head:#f3f4f6;
  --shadow:0 6px 20px rgba(2,6,23,.08);
  --page-pad-x: clamp(16px, 6vw, 60px);
  --footer-h: 110px; /* 可由 JS 动态更新 */
}

/* ========== Base ========== */
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; background:var(--bg); color:var(--text); line-height:1.6;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial,"Noto Sans";
  padding-inline: var(--page-pad-x);
  padding-bottom: var(--footer-h);
}

/* ===== Header（满宽 + 兼容修复） ===== */
.site-header{
  position:sticky; top:0; z-index:1000;
  background:#f9fafb; color:#111827; border-bottom:1px solid var(--border);
  box-shadow:0 1px 3px rgba(0,0,0,.05);
}
.header-container{
  display:grid; grid-template-columns:auto 1fr auto; align-items:center;
  gap:12px; padding: clamp(6px, 1.5vw, 12px) 8px;
}
.header-left{justify-self:start; display:flex; align-items:center; margin-left: clamp(0px, 5vw, 80px)}
.header-logo{height: clamp(40px, 5vw, 60px); width:auto}
.header-center{
  justify-self:center; text-align:center; font-size:clamp(20px, 3vw, 32px);
  font-weight:700; letter-spacing:.3px; color:#111827;
}
.header-right{justify-self:end; display:flex; gap: clamp(10px, 2vw, 18px); margin-right: clamp(0px, 7vw, 100px)}
.header-right .nav-link{font-size:16px; font-weight:500; color:#374151; text-decoration:none; transition:color .2s ease}
.header-right .nav-link:hover{color:#111827}
.header-meta{padding:4px 20px 10px; text-align:right; font-size:13px; color:#6b7280}

/* 让 Header 满宽（抵消 body 左右留白） */
header{margin-left: calc(var(--page-pad-x) * -1); margin-right: calc(var(--page-pad-x) * -1)}
header h1{margin:0; font-size:20px}
header nav a{color:#c7d2fe; padding:6px 10px; margin:0 4px; border-radius:10px; text-decoration:none}
header nav a:hover{background:rgba(199,210,254,.15); color:#fff}
#refresh-info{font-size:12px; opacity:.85}

/* ========== Section ======= */
section{padding:16px 20px}

/* ========== Filters（两行布局） ========== */
#filters{
  background:var(--card); border:1px solid var(--border); border-radius:14px; box-shadow:var(--shadow);
  display:flex; flex-wrap:wrap; gap:16px 24px; padding:14px; align-items:flex-start; margin:16px 20px;
}
#filters label{
  display:flex; flex-direction:column; gap:6px; min-width:220px; flex:1 1 260px; color:var(--muted); font-size:14px;
}
#filters select,#filters input,#filters .ms-toggle{
  background:var(--card-alt); border:1px solid var(--border); border-radius:10px;
  padding:8px 10px; min-height:36px; font-size:14px; color:var(--text);
}
#filters .btn-group{flex-basis:100%; display:flex; gap:12px; margin-top:4px}
#filters .btn-group button{
  padding:8px 16px; border-radius:10px; font-size:14px; font-weight:600; cursor:pointer;
  border:1px solid var(--accent); background:var(--accent); color:#fff;
}

/* ========== Table ========== */
table{
  width:100%; border-collapse:separate; border-spacing:0; background:var(--card);
  border:1px solid var(--border); border-radius:14px; overflow:hidden;
}
thead th{position:sticky; top:0; background:var(--table-head); color:var(--muted); font-weight:600}
th,td{padding:12px 10px; text-align:center; border-bottom:1px solid var(--border)}
tbody tr:nth-child(even){background:var(--card-alt)}

/* Fallback 行色（保留旧类名），避免依赖 color-mix 支持 */
tr.dead{background:rgba(239,68,68,.16); box-shadow:inset 4px 0 0 0 #ef4444}
tr.warn{background:rgba(245,158,11,.16); box-shadow:inset 4px 0 0 0 #f59e0b}
tr.ok{background:rgba(16,185,129,.14); box-shadow:inset 4px 0 0 0 #10b981}

/* 天数差配色（与 analytics.css 一致） */
tbody tr.days-purple{background:#8b5cf622; box-shadow:inset 4px 0 0 0 #8b5cf6}
tbody tr.days-red-strong{background:#ef444422; box-shadow:inset 4px 0 0 0 #ef4444}
tbody tr.days-pink{background:#f472b622; box-shadow:inset 4px 0 0 0 #f472b6}
tbody tr.days-orange{background:#f59e0b22; box-shadow:inset 4px 0 0 0 #f59e0b}
tbody tr.days-green{background:#10b98122; box-shadow:inset 4px 0 0 0 #10b981}

/* ========== 自定义多选（通用） ========== */
.ms-field{display:inline-flex; flex-direction:column; gap:6px}
.ms{position:relative; display:inline-block; width:100%; max-width:320px}
.ms-toggle{display:inline-flex; align-items:center; justify-content:space-between; gap:6px; padding:8px 10px; width:100%; background:var(--card-alt); border:1px solid var(--border); border-radius:10px; cursor:pointer}
.ms-caret{opacity:.7}
.ms-panel{
  position:absolute; z-index:60; top:calc(100% + 6px); left:0;
  min-width:260px; width:max(260px,100%); max-width:420px; background:#fff; border:1px solid var(--border);
  border-radius:12px; box-shadow:0 10px 24px rgba(2,6,23,.12); padding:10px;
}
.ms-head{display:flex; align-items:center; gap:6px; font-size:12px; margin-bottom:8px}
.ms-head a{color:#2563eb; text-decoration:none}
.ms-head a:hover{text-decoration:underline}
.ms-count{margin-left:auto; color:#6b7280}
.ms-search{position:relative; margin-bottom:8px}
.ms-input{width:100%; padding:8px 30px 8px 10px; border:1px solid var(--border); border-radius:8px}
.ms-icon{position:absolute; right:8px; top:50%; transform:translateY(-50%); opacity:.7}
.ms-list{max-height:260px; overflow:auto; padding-right:4px}
.ms-item{display:flex; align-items:center; gap:8px; padding:6px 4px}
.ms-empty{color:#9ca3af; font-size:12px; padding:8px 4px}

/* ========== Footer（固定底部，三行信息） ========== */
.footer{
  background:#f3f4f6; border-top:1px solid var(--border); padding:16px 20px; font-size:13px; color:#000;
  position:fixed; bottom:0; left:0; right:0; z-index:1000; text-align:center;
}
.footer-content{display:flex; flex-direction:column; align-items:center; gap:6px}
.footer .logo{height:40px; width:auto; margin-bottom:4px}
.footer-info{display:flex; flex-wrap:wrap; gap:6px; justify-content:center; align-items:center}
.footer-info a{color:#000; text-decoration:none}
.footer-info a:hover{text-decoration:underline}
.footer-copy{font-size:12px; color:#555}
